(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[133],{9553:(e,i,n)=>{Promise.resolve().then(n.bind(n,7726))},9730:(e,i,n)=>{"use strict";n.d(i,{A:()=>r});var t=n(2115),a=n(2784),s=function(){return(s=Object.assign||function(e){for(var i,n=1,t=arguments.length;n<t;n++)for(var a in i=arguments[n])Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);return e}).apply(this,arguments)},l=function(e,i){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>i.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var t=0,a=Object.getOwnPropertySymbols(e);t<a.length;t++)0>i.indexOf(a[t])&&Object.prototype.propertyIsEnumerable.call(e,a[t])&&(n[a[t]]=e[a[t]]);return n},o=function(e){return"Typesetting failed: ".concat(void 0!==e.message?e.message:JSON.stringify(e))};let r=function(e){function i(){var e;"every"===v&&b&&"post"===_&&null!==m.current&&(m.current.style.visibility=null!=(e=null==(e=x.style)?void 0:e.visibility)?e:"visible"),C.current||("first"===v&&null!==m.current&&(m.current.style.visibility="visible"),d&&d(),C.current=!0),h&&h(),A.current=!1}var n=e.inline,r=void 0!==n&&n,n=e.hideUntilTypeset,d=e.onInitTypeset,h=e.onTypeset,c=e.text,g=e.dynamic,p=e.typesettingOptions,u=e.renderMode,f=e.children,x=l(e,["inline","hideUntilTypeset","onInitTypeset","onTypeset","text","dynamic","typesettingOptions","renderMode","children"]),j=(0,t.useRef)(""),m=(0,t.useRef)(null),w=(0,t.useContext)(a.k),v=null!=n?n:null==w?void 0:w.hideUntilTypeset,_=null!=u?u:null==w?void 0:w.renderMode,y=null!=p?p:null==w?void 0:w.typesettingOptions,b=!1!==g&&(g||!1),C=(0,t.useRef)(!1),A=(0,t.useRef)(!1);return!A.current&&null!==m.current&&b&&"every"===v&&"post"===_&&(m.current.style.visibility="hidden"),("undefined"!=typeof window?t.useLayoutEffect:t.useEffect)(function(){if((b||!C.current)&&null!==m.current){if(!w)throw Error("MathJax was not loaded, did you use the MathJax component outside of a MathJaxContext?");if("pre"===_){if(!("string"==typeof c&&0<c.length))throw Error("Render mode 'pre' requires text prop to be set and non-empty, which was currently \"".concat(c,'"'));if(!p||!p.fn)throw Error("Render mode 'pre' requires 'typesettingOptions' prop with 'fn' property to be set on MathJax element or in the MathJaxContext");if(2===w.version)throw Error("Render mode 'pre' only available with MathJax 3, and version 2 is currently in use")}"post"!==_&&c===j.current||A.current||(A.current=!0,3===w.version?w.promise.then(function(e){var n;"pre"===_?(n=function(n){j.current=c,e.startup.document.clear(),e.startup.document.updateDocument(),null!==m.current&&(m.current.innerHTML=n.outerHTML),i()},p.fn.endsWith("Promise")?e.startup.promise.then(function(){return e[y.fn](c,s(s({},(null==y?void 0:y.options)||{}),{display:!r}))}).then(n).catch(function(e){throw i(),Error(o(e))}):e.startup.promise.then(function(){n(e[y.fn](c,s(s({},(null==y?void 0:y.options)||{}),{display:!r})))}).catch(function(e){throw i(),Error(o(e))})):e.startup.promise.then(function(){return e.typesetClear([m.current]),e.typesetPromise([m.current])}).then(i).catch(function(e){throw i(),Error(o(e))})}).catch(function(e){throw i(),Error(o(e))}):w.promise.then(function(e){e.Hub.Queue(["Typeset",e.Hub,m.current]),e.Hub.Queue(i)}).catch(function(e){throw i(),Error(o(e))}))}}),t.createElement("span",s({},x,{style:s(s({display:r?"inline":"block"},x.style),{visibility:v?"hidden":null==(e=x.style)?void 0:e.visibility}),ref:m}),f)}},2784:(e,i,n)=>{"use strict";n.d(i,{A:()=>h,k:()=>o});var t,a,s=n(2115),l=function(){return(l=Object.assign||function(e){for(var i,n=1,t=arguments.length;n<t;n++)for(var a in i=arguments[n])Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);return e}).apply(this,arguments)},o=(0,s.createContext)(void 0),r="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_CHTML",d="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js";let h=function(e){var i=e.config,n=e.version,n=void 0===n?3:n,h=e.src,h=void 0===h?2===n?r:d:h,c=e.onStartup,g=e.onLoad,p=e.asyncLoad,u=void 0!==p&&p,f=e.onError,p=e.typesettingOptions,x=e.renderMode,x=void 0===x?"post":x,j=e.hideUntilTypeset,e=e.children,m=(0,s.useContext)(o);if(void 0!==(null==m?void 0:m.version)&&(null==m?void 0:m.version)!==n)throw Error("Cannot nest MathJaxContexts with different versions. MathJaxContexts should not be nested at all but if they are, they cannot have different versions. Stick with one version of MathJax in your app and avoid using more than one MathJaxContext.");if(2===n&&void 0!==a||3===n&&void 0!==t)throw Error("Cannot use MathJax versions 2 and 3 simultaneously in the same app due to how MathJax is set up in the browser; either you have multiple MathJaxContexts with different versions or you have mounted and unmounted MathJaxContexts with different versions. Please stick with one version of MathJax in your app. File an issue in the project Github page if you need this feature.");var w=(0,s.useRef)(m),m=(0,s.useRef)((null==m?void 0:m.version)||null);if(null===m.current)m.current=n;else if(m.current!==n)throw Error("Cannot change version of MathJax in a MathJaxContext after it has mounted. Reload the page with a new version when this must happen.");var v=h||(2===n?r:d);function _(e,n){i&&(window.MathJax=i);var t=document.createElement("script");t.type="text/javascript",t.src=v,t.async=u,t.addEventListener("load",function(){var i=window.MathJax;c&&c(i),e(i),g&&g()}),t.addEventListener("error",function(e){return n(e)}),document.getElementsByTagName("head")[0].appendChild(t)}return void 0===w.current&&(m={typesettingOptions:p,renderMode:x,hideUntilTypeset:j},2===n?void 0===t&&("undefined"!=typeof window?(t=new Promise(_)).catch(function(e){if(!f)throw Error("Failed to download MathJax version 2 from '".concat(v,"' due to: ").concat(JSON.stringify(e)));f(e)}):(t=Promise.reject()).catch(function(e){})):void 0===a&&("undefined"!=typeof window?(a=new Promise(_)).catch(function(e){if(!f)throw Error("Failed to download MathJax version 3 from '".concat(v,"' due to: ").concat(e));f(e)}):(a=Promise.reject()).catch(function(e){})),w.current=l(l({},m),2===n?{version:2,promise:t}:{version:3,promise:a})),s.createElement(o.Provider,{value:w.current},e)}},5565:(e,i,n)=>{"use strict";n.d(i,{default:()=>a.a});var t=n(4146),a=n.n(t)},3018:e=>{!function(){"use strict";var i={114:function(e){function i(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,i){for(var n,t="",a=0,s=-1,l=0,o=0;o<=e.length;++o){if(o<e.length)n=e.charCodeAt(o);else if(47===n)break;else n=47;if(47===n){if(s===o-1||1===l);else if(s!==o-1&&2===l){if(t.length<2||2!==a||46!==t.charCodeAt(t.length-1)||46!==t.charCodeAt(t.length-2)){if(t.length>2){var r=t.lastIndexOf("/");if(r!==t.length-1){-1===r?(t="",a=0):a=(t=t.slice(0,r)).length-1-t.lastIndexOf("/"),s=o,l=0;continue}}else if(2===t.length||1===t.length){t="",a=0,s=o,l=0;continue}}i&&(t.length>0?t+="/..":t="..",a=2)}else t.length>0?t+="/"+e.slice(s+1,o):t=e.slice(s+1,o),a=o-s-1;s=o,l=0}else 46===n&&-1!==l?++l:l=-1}return t}var t={resolve:function(){for(var e,t,a="",s=!1,l=arguments.length-1;l>=-1&&!s;l--)l>=0?t=arguments[l]:(void 0===e&&(e=""),t=e),i(t),0!==t.length&&(a=t+"/"+a,s=47===t.charCodeAt(0));return(a=n(a,!s),s)?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(e){if(i(e),0===e.length)return".";var t=47===e.charCodeAt(0),a=47===e.charCodeAt(e.length-1);return(0!==(e=n(e,!t)).length||t||(e="."),e.length>0&&a&&(e+="/"),t)?"/"+e:e},isAbsolute:function(e){return i(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var a=arguments[n];i(a),a.length>0&&(void 0===e?e=a:e+="/"+a)}return void 0===e?".":t.normalize(e)},relative:function(e,n){if(i(e),i(n),e===n||(e=t.resolve(e))===(n=t.resolve(n)))return"";for(var a=1;a<e.length&&47===e.charCodeAt(a);++a);for(var s=e.length,l=s-a,o=1;o<n.length&&47===n.charCodeAt(o);++o);for(var r=n.length-o,d=l<r?l:r,h=-1,c=0;c<=d;++c){if(c===d){if(r>d){if(47===n.charCodeAt(o+c))return n.slice(o+c+1);if(0===c)return n.slice(o+c)}else l>d&&(47===e.charCodeAt(a+c)?h=c:0===c&&(h=0));break}var g=e.charCodeAt(a+c);if(g!==n.charCodeAt(o+c))break;47===g&&(h=c)}var p="";for(c=a+h+1;c<=s;++c)(c===s||47===e.charCodeAt(c))&&(0===p.length?p+="..":p+="/..");return p.length>0?p+n.slice(o+h):(o+=h,47===n.charCodeAt(o)&&++o,n.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(i(e),0===e.length)return".";for(var n=e.charCodeAt(0),t=47===n,a=-1,s=!0,l=e.length-1;l>=1;--l)if(47===(n=e.charCodeAt(l))){if(!s){a=l;break}}else s=!1;return -1===a?t?"/":".":t&&1===a?"//":e.slice(0,a)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw TypeError('"ext" argument must be a string');i(e);var t,a=0,s=-1,l=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var o=n.length-1,r=-1;for(t=e.length-1;t>=0;--t){var d=e.charCodeAt(t);if(47===d){if(!l){a=t+1;break}}else -1===r&&(l=!1,r=t+1),o>=0&&(d===n.charCodeAt(o)?-1==--o&&(s=t):(o=-1,s=r))}return a===s?s=r:-1===s&&(s=e.length),e.slice(a,s)}for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!l){a=t+1;break}}else -1===s&&(l=!1,s=t+1);return -1===s?"":e.slice(a,s)},extname:function(e){i(e);for(var n=-1,t=0,a=-1,s=!0,l=0,o=e.length-1;o>=0;--o){var r=e.charCodeAt(o);if(47===r){if(!s){t=o+1;break}continue}-1===a&&(s=!1,a=o+1),46===r?-1===n?n=o:1!==l&&(l=1):-1!==n&&(l=-1)}return -1===n||-1===a||0===l||1===l&&n===a-1&&n===t+1?"":e.slice(n,a)},format:function(e){var i,n;if(null===e||"object"!=typeof e)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return i=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||""),i?i===e.root?i+n:i+"/"+n:n},parse:function(e){i(e);var n,t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var a=e.charCodeAt(0),s=47===a;s?(t.root="/",n=1):n=0;for(var l=-1,o=0,r=-1,d=!0,h=e.length-1,c=0;h>=n;--h){if(47===(a=e.charCodeAt(h))){if(!d){o=h+1;break}continue}-1===r&&(d=!1,r=h+1),46===a?-1===l?l=h:1!==c&&(c=1):-1!==l&&(c=-1)}return -1===l||-1===r||0===c||1===c&&l===r-1&&l===o+1?-1!==r&&(0===o&&s?t.base=t.name=e.slice(1,r):t.base=t.name=e.slice(o,r)):(0===o&&s?(t.name=e.slice(1,l),t.base=e.slice(1,r)):(t.name=e.slice(o,l),t.base=e.slice(o,r)),t.ext=e.slice(l,r)),o>0?t.dir=e.slice(0,o-1):s&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};t.posix=t,e.exports=t}},n={};function t(e){var a=n[e];if(void 0!==a)return a.exports;var s=n[e]={exports:{}},l=!0;try{i[e](s,s.exports,t),l=!1}finally{l&&delete n[e]}return s.exports}t.ab="//";var a=t(114);e.exports=a}()},4146:(e,i,n)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),function(e,i){for(var n in i)Object.defineProperty(e,n,{enumerable:!0,get:i[n]})}(i,{default:function(){return r},getImageProps:function(){return o}});let t=n(306),a=n(666),s=n(7970),l=t._(n(5514));function o(e){let{props:i}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,n]of Object.entries(i))void 0===n&&delete i[e];return{props:i}}let r=s.Image},7726:(e,i,n)=>{"use strict";n.r(i),n.d(i,{default:()=>u});var t=n(5155),a=n(3018),s=n.n(a),l=n(8989),o=n(9727),r=n(1109),d=n(2723),h=n(5565),c=n(9730);let g=s().join("/projects/ImageProcessing/Project5/","media"),p=[{id:"Forward Process",content:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Forward Process"}),(0,t.jsxs)("p",{children:["In the forward process, an image is denoised by subtracting away the noise that is predicted to be in the image. For diffusion, the model is trained on the noise given by:",(0,t.jsx)(c.A,{children:"\\begin{equation*} \\mathcal{N}(0, \\sqrt{1 - \\overline{\\alpha}}) \\end{equation*}"}),"Adding this noise to our base image"," ",(0,t.jsx)(c.A,{inline:!0,children:"\\begin{equation*} \\sqrt{\\overline{\\alpha}} \\cdot x_0 \\end{equation*}"})," ","gives the noisy image that the network sees at"," ",(0,t.jsx)(c.A,{inline:!0,children:"\\(\\alpha\\)"}),", the interpolation factor. Here, ",(0,t.jsx)(c.A,{inline:!0,children:"\\(\\alpha\\)"})," is determined by a schedule, and we obtain it by"," ",(0,t.jsx)(c.A,{inline:!0,children:"\\(\\alpha[t]\\)"})," where"," ",(0,t.jsx)(c.A,{inline:!0,children:"\\(t\\)"})," is the timestep"," ",(0,t.jsx)(c.A,{inline:!0,children:"\\(t \\in [0, 999]\\)"}),". Here are some results of generating the noisy image:"]}),(0,t.jsxs)(d.V,{columns:4,children:[(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/camp_clean.png"),width:"64",height:"64",alt:"Campanile Noise t0"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 0\\)"})})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/gaussian/noise_t250.png"),width:"64",height:"64",alt:"Campanile Noise t250"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 250\\)"})})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/gaussian/noise_t500.png"),width:"64",height:"64",alt:"Campanile Noise t500"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 500\\)"})})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/gaussian/noise_t750.png"),width:"64",height:"64",alt:"Campanile Noise t750"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 750\\)"})})]})]})]})},{id:"Denoising",content:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Denoising"}),(0,t.jsx)("h3",{children:"Classic Denoising"}),(0,t.jsx)("p",{children:"In classic denoising, we attempt to hide irregularities in the image through some averaging/smoothing filter such as the gaussian filter. By pulling data from neighboring pixels, we can decrease the impact of noise on the image. This does well when there is little noise, but fails at high noise levels, which is seen in all three attempts."}),(0,t.jsxs)(d.V,{columns:4,children:[(0,t.jsx)(h.default,{src:s().join(g,"/camp_clean.png"),width:"64",height:"64",alt:"Campanile Noise t0"}),(0,t.jsx)(h.default,{src:s().join(g,"/gaussian/noise_t250.png"),width:"64",height:"64",alt:"Campanile Noise t250",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/gaussian/noise_t500.png"),width:"64",height:"64",alt:"Campanile Noise t500",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/gaussian/noise_t750.png"),width:"64",height:"64",alt:"Campanile Noise t750",loading:"lazy"}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/camp_clean.png"),width:"64",height:"64",alt:"Campanile Noise t0"}),(0,t.jsx)("figcaption",{children:"Original"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/gaussian/clean_t250.png"),width:"64",height:"64",alt:"Campanile Clean t250",loading:"lazy"}),(0,t.jsxs)("figcaption",{children:["Denoise ",(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 250\\)"})]})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/gaussian/clean_t500.png"),width:"64",height:"64",alt:"Campanile Clean t500",loading:"lazy"}),(0,t.jsxs)("figcaption",{children:["Denoise ",(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 500\\)"})]})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/gaussian/clean_t750.png"),width:"64",height:"64",alt:"Campanile Clean t750",loading:"lazy"}),(0,t.jsxs)("figcaption",{children:["Denoise ",(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 750\\)"})]})]})]}),(0,t.jsx)("h3",{children:"One-Step Denoising"}),(0,t.jsxs)("p",{children:["In one step denoising, we feed in the noisy image and the current timestep, and the model recovers the amount of noise that is predicted to be in the image. Recall that we used the equation:"," ",(0,t.jsx)(c.A,{children:"\\begin{equation*} x_{t} = \\sqrt{\\overline{\\alpha}} \\cdot x_{0} + \\sqrt{1 - \\overline{\\alpha}} \\cdot \\epsilon \\end{equation*}"})," ","for the forward process. So we can recover the original image"," ",(0,t.jsx)(c.A,{inline:!0,children:"\\(x_0\\)"})," by:",(0,t.jsx)(c.A,{children:"\\begin{equation*} x_{0} = \\dfrac{x_{t} - \\sqrt{1 - \\overline{\\alpha}} \\cdot \\epsilon}{\\sqrt{\\overline{\\alpha}}} \\end{equation*}"})]}),(0,t.jsxs)(d.V,{columns:4,children:[(0,t.jsx)(h.default,{src:s().join(g,"/camp_clean.png"),width:"64",height:"64",alt:"Campanile Noise t0"}),(0,t.jsx)(h.default,{src:s().join(g,"/one_step/noise_t250.png"),width:"64",height:"64",alt:"Campanile Noise t250",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/one_step/noise_t500.png"),width:"64",height:"64",alt:"Campanile Noise t500",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/one_step/noise_t750.png"),width:"64",height:"64",alt:"Campanile Noise t750",loading:"lazy"}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/camp_clean.png"),width:"64",height:"64",alt:"Campanile Noise t0"}),(0,t.jsx)("figcaption",{children:"Original"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/one_step/clean_t250.png"),width:"64",height:"64",alt:"Campanile Clean t250",loading:"lazy"}),(0,t.jsxs)("figcaption",{children:["Denoise: ",(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 250\\)"})]})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/one_step/clean_t500.png"),width:"64",height:"64",alt:"Campanile Clean t500",loading:"lazy"}),(0,t.jsxs)("figcaption",{children:["Denoise: ",(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 500\\)"})]})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/one_step/clean_t750.png"),width:"64",height:"64",alt:"Campanile Clean t750",loading:"lazy"}),(0,t.jsxs)("figcaption",{children:["Denoise: ",(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 750\\)"})]})]})]}),(0,t.jsx)("p",{children:"This does much better than the low-pass filter, but the image is till blurry compared to the original. For example, the trees have lost their texture and takes on a flat green texture."}),(0,t.jsx)("h3",{children:"Iterative Denoising"}),(0,t.jsxs)("p",{children:["In iterative denoising, rather than subtracting all noise out in one step, we subtract a little bit of noise over many steps and repredict the next amount of noise. The process is sped up by taking strided timesteps and the new formula is given by:",(0,t.jsx)(c.A,{children:"\\begin{equation*} x_{t^{\\prime}} =\\dfrac{\\sqrt{\\overline{\\alpha_{t^{\\prime}}}}\\beta_{t}}{1 - \\overline{\\alpha}_{t}}x_{0} + \\dfrac{\\sqrt{\\alpha_{t}}(1 - \\overline{\\alpha}_{t^{\\prime}})}{1 - \\overline{\\alpha_{t}}}x_{t} + v_{\\sigma}\\end{equation*}"})," ","The values are given by:"]}),(0,t.jsxs)("ul",{className:"ml-8",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)(c.A,{inline:!0,children:"\\(x_{t}\\)"})," is the noisy image at time ",(0,t.jsx)(c.A,{inline:!0,children:"\\(t\\)"})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)(c.A,{inline:!0,children:"\\(x_{t^{\\prime}}\\)"})," is the noisy image at the next timestep"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)(c.A,{inline:!0,children:"\\(\\overline{\\alpha}_{t}\\)"})," ","is ",(0,t.jsx)(c.A,{inline:!0,children:"\\(\\alpha[t]\\)"})]}),(0,t.jsx)("li",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(\\alpha_{t} = \\frac{\\overline{\\alpha}_{t}}{\\overline{\\alpha_{t^{\\prime}}}}\\)"})}),(0,t.jsx)("li",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(\\beta_{t} = 1 - \\alpha_{t}\\)"})}),(0,t.jsxs)("li",{children:[(0,t.jsx)(c.A,{inline:!0,children:"\\(x_{0}\\)"})," is the predicted clean image given by the one step formula"]})]}),(0,t.jsxs)(d.V,{columns:3,children:[(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/iterative/camp_1.png"),width:"64",height:"64",alt:"Campanile Iterative Denoise 1",loading:"lazy"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 690\\)"})})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/iterative/camp_2.png"),width:"64",height:"64",alt:"Campanile Iterative Denoise 2",loading:"lazy"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 540\\)"})})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/iterative/camp_3.png"),width:"64",height:"64",alt:"Campanile Iterative Denoise 3",loading:"lazy"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 390\\)"})})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/iterative/camp_4.png"),width:"64",height:"64",alt:"Campanile Iterative Denoise 4",loading:"lazy"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 240\\)"})})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/iterative/camp_5.png"),width:"64",height:"64",alt:"Campanile Iterative Denoise 5",loading:"lazy"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 90\\)"})})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/iterative/camp_iterative.png"),width:"64",height:"64",alt:"Campanile Iterative Denoise 6",loading:"lazy"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 0\\)"})})]})]}),(0,t.jsx)("p",{children:"The resulting image looks sharper than the previous ones"}),(0,t.jsx)("h3",{children:"A Comparison"}),(0,t.jsxs)(d.V,{columns:4,children:[(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/gaussian/clean_t750.png"),width:"64",height:"64",alt:"Gaussian Denoise",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"Gaussian Denoise"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/one_step/clean_t750.png"),alt:"One Step Denoise",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"One Step Denoise"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/iterative/camp_iterative.png"),alt:"Iterative Denoise",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"Iterative Denoise"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/camp_clean.png"),alt:"Campanile",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"Original"})]})]}),(0,t.jsx)("p",{children:"It is noticeable that gaussian denoising is not very effective when there is too much noise. So we have to go for nonlinear denoising methods, such as one step and iterative denoising."})]})},{id:"Diffusion Sampling",content:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Diffusion Model Sampling"}),(0,t.jsx)("p",{children:"We can also denoise pure noise, rather than starting from a noisy image. Here are $5$ results:"}),(0,t.jsxs)(d.V,{columns:5,children:[(0,t.jsx)(h.default,{src:s().join(g,"/diff_sample/diff_sample_1.png"),alt:"Diffusion Sample 1",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/diff_sample/diff_sample_2.png"),alt:"Diffusion Sample 2",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/diff_sample/diff_sample_3.png"),alt:"Diffusion Sample 3",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/diff_sample/diff_sample_4.png"),alt:"Diffusion Sample 4",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/diff_sample/diff_sample_5.png"),alt:"Diffusion Sample 5",width:"64",height:"64",loading:"lazy"})]})]})},{id:"CFG",content:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Classifier Free Guidance"}),(0,t.jsxs)("p",{children:["In CFG, the model uses conditional classification. We can generate two noise predictions off of our current image",(0,t.jsx)(c.A,{inline:!0,children:"\\(\\epsilon_{c}, \\epsilon_{u}\\)"})," ","such that our new predicted noise is:"," ",(0,t.jsx)(c.A,{children:"\\begin{equation*} \\epsilon = (1 - \\gamma)\\epsilon_{u} + \\gamma \\epsilon_{c} \\end{equation*}"})," ","This means that when"," ",(0,t.jsx)(c.A,{inline:!0,children:"\\(\\gamma > 1\\)"})," the noise prediction leans more towards using the conditional noise. From the small update the images become much more recognizable:"]}),(0,t.jsxs)(d.V,{columns:5,children:[(0,t.jsx)(d.V,{children:(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{className:"dissolve",src:s().join(g,"/iterative_cfg/cfg1/denoise_8.png"),alt:"iterative_cfg1_clean",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)(h.default,{className:"emerge",src:s().join(g,"/iterative_cfg/cfg1/output.gif"),width:"64",height:"64",alt:"iterative_cfg1_gif",loading:"lazy"})]})}),(0,t.jsx)(d.V,{children:(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{className:"dissolve",src:s().join(g,"/iterative_cfg/cfg2/denoise_8.png"),alt:"iterative_cfg2_clean",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)(h.default,{className:"emerge",src:s().join(g,"/iterative_cfg/cfg2/output.gif"),alt:"iterative_cfg2_gif",width:"64",height:"64",loading:"lazy"})]})}),(0,t.jsx)(d.V,{children:(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{className:"dissolve",src:s().join(g,"/iterative_cfg/cfg3/denoise_8.png"),alt:"iterative_cfg3_clean",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)(h.default,{className:"emerge",src:s().join(g,"/iterative_cfg/cfg3/output.gif"),alt:"iterative_cfg3_gif",width:"64",height:"64",loading:"lazy"})]})}),(0,t.jsx)(d.V,{children:(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{className:"dissolve",src:s().join(g,"/iterative_cfg/cfg4/denoise_8.png"),alt:"iterative_cfg4_clean",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)(h.default,{className:"emerge",src:s().join(g,"/iterative_cfg/cfg4/output.gif"),alt:"iterative_cfg4_gif",loading:"lazy",width:"64",height:"64"})]})}),(0,t.jsx)(d.V,{children:(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{className:"dissolve",src:s().join(g,"/iterative_cfg/cfg5/denoise_8.png"),alt:"iterative_cfg5_clean",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)(h.default,{className:"emerge",src:s().join(g,"/iterative_cfg/cfg5/output.gif"),width:"64",height:"64",alt:"iterative_cfg5_gif",loading:"lazy"})]})})]})]})},{id:"Image Translation",content:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Image to Image Translation"}),(0,t.jsx)("p",{children:"Rather than starting with random noise, we can start with a noisy base image and run iterative cfg to get variations from our base image. This is done by running the forward noising process and running the previous algorithm on the noisy image."}),(0,t.jsxs)(d.V,{columns:6,children:[(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/im_translation/t_1.png"),alt:"Image Translation t1",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 1\\)"})})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/im_translation/t_3.png"),alt:"Image Translation t3",loading:"lazy",width:"64",height:"64"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 3\\)"})})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/im_translation/t_5.png"),alt:"Image Translation t5",loading:"lazy",width:"64",height:"64"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 5\\)"})})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/im_translation/t_7.png"),alt:"Image Translation t7",loading:"lazy",width:"64",height:"64"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 7\\)"})})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/im_translation/t_10.png"),alt:"Image Translation t10",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 10\\)"})})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/im_translation/t_20.png"),alt:"Image Translation t20",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)("figcaption",{children:(0,t.jsx)(c.A,{inline:!0,children:"\\(t = 20\\)"})})]})]})]})},{id:"Hand-Drawn/Web Images",content:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Editing Hand-Drawn/Web Images"}),(0,t.jsx)("p",{children:"We can also denoise hand-drawn and web images:"}),(0,t.jsxs)(d.V,{columns:5,children:[(0,t.jsx)(h.default,{src:s().join(g,"/web_edits/t_1.png"),width:"64",height:"64",alt:"Web Edit t1",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/web_edits/t_3.png"),width:"64",height:"64",alt:"Web Edit t3",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/web_edits/t_5.png"),width:"64",height:"64",alt:"Web Edit t5",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/web_edits/t_7.png"),width:"64",height:"64",alt:"Web Edit t7",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/web_edits/t_10.png"),width:"64",height:"64",alt:"Web Edit t10",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/web_edits/t_20.png"),width:"64",height:"64",alt:"Web Edit t20",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/web_edits/original.png"),width:"64",height:"64",alt:"Base Image",loading:"lazy"})]}),(0,t.jsxs)(d.V,{columns:5,children:[(0,t.jsx)(h.default,{src:s().join(g,"/hand_drawn_edits/t_1.png"),width:"64",height:"64",alt:"Hand-Drawn Edit t1",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/hand_drawn_edits/t_3.png"),width:"64",height:"64",alt:"Hand-Drawn Edit t3",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/hand_drawn_edits/t_5.png"),width:"64",height:"64",alt:"Hand-Drawn Edit t5",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/hand_drawn_edits/t_7.png"),width:"64",height:"64",alt:"Hand-Drawn Edit t7",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/hand_drawn_edits/t_10.png"),width:"64",height:"64",alt:"Hand-Drawn Edit t10",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/hand_drawn_edits/t_20.png"),width:"64",height:"64",alt:"Hand-Drawn Edit t20",loading:"lazy"}),(0,t.jsx)(h.default,{src:s().join(g,"/hand_drawn_edits/original.png"),width:"64",height:"64",alt:"Base Image",loading:"lazy"})]})]})},{id:"Inpainting",content:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Inpainting"}),(0,t.jsx)("p",{children:"We can also inpaint an image given the work done so far. Rather than subtracting out the noise calculated at each step from our entire image, we only subtract out the calculated noise in a section of our image. This means that for all noise outside the area we want to inpaint, we replace it with the original image processed through the forward noising function."}),(0,t.jsxs)(d.V,{columns:5,children:[(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/inpainting/denoise_1.png"),width:"64",height:"64",alt:"Campanile Inpaint 1",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"$t=990$"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/inpainting/denoise_2.png"),width:"64",height:"64",alt:"Campanile Inpaint 2",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"$t=840$"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/inpainting/denoise_3.png"),width:"64",height:"64",alt:"Campanile Inpaint 3",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"$t=690$"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/inpainting/denoise_4.png"),width:"64",height:"64",alt:"Campanile Inpaint 4",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"$t=540$"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/inpainting/denoise_5.png"),width:"64",height:"64",alt:"Campanile Inpaint 5",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"$t=390$"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/inpainting/denoise_6.png"),width:"64",height:"64",alt:"Campanile Inpaint 6",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"$t=240$"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/inpainting/denoise_7.png"),width:"64",height:"64",alt:"Campanile Inpaint 7",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"$t=90$"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/inpainting/denoise_8.png"),width:"64",height:"64",alt:"Campanile Inpaint 8",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"$t=0$"})]})]})]})},{id:"Text Conditional Translation",content:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Text Conditional Image to Image Translation"}),(0,t.jsx)("p",{children:'Rather than keeping the prompt set to "a high quality photo", we can replace it with a text prompt from the prompt embedding. This means that rather than denoising unconditionally, we denoise based on the prompt given, which will give the image a push towards what is specified by the prompt.'}),(0,t.jsxs)(d.V,{columns:6,children:[(0,t.jsxs)(d.D,{children:[(0,t.jsxs)(d.V,{children:[(0,t.jsx)(h.default,{className:"dissolve",src:s().join(g,"/text_conditioned/t_1/denoise_8.png"),width:"64",height:"64",alt:"Campanile Translation Rocket t_1",loading:"lazy"}),(0,t.jsx)(h.default,{className:"emerge",src:s().join(g,"/text_conditioned/t_1/output.gif"),width:"64",height:"64",alt:"Campanile Translation Rocket t_1 gif",loading:"lazy"})]}),(0,t.jsx)("figcaption",{children:"$t = 1$"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsxs)(d.V,{children:[(0,t.jsx)(h.default,{className:"dissolve",src:s().join(g,"/text_conditioned/t_2/denoise_8.png"),width:"64",height:"64",alt:"Campanile Translation Rocket t_2",loading:"lazy"}),(0,t.jsx)(h.default,{className:"emerge",src:s().join(g,"/text_conditioned/t_2/output.gif"),width:"64",height:"64",alt:"Campanile Translation Rocket t_2 gif",loading:"lazy"})]}),(0,t.jsx)("figcaption",{children:"$t = 3$"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsxs)(d.V,{children:[(0,t.jsx)(h.default,{className:"dissolve",src:s().join(g,"/text_conditioned/t_3/denoise_8.png"),width:"64",height:"64",alt:"Campanile Translation Rocket t_3",loading:"lazy"}),(0,t.jsx)(h.default,{className:"emerge",src:s().join(g,"/text_conditioned/t_3/output.gif"),width:"64",height:"64",alt:"Campanile Translation Rocket t_3 gif",loading:"lazy"})]}),(0,t.jsx)("figcaption",{children:"$t = 5$"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsxs)(d.V,{children:[(0,t.jsx)(h.default,{className:"dissolve",src:s().join(g,"/text_conditioned/t_4/denoise_7.png"),width:"64",height:"64",alt:"Campanile Translation Rocket t_4",loading:"lazy"}),(0,t.jsx)(h.default,{className:"emerge",src:s().join(g,"/text_conditioned/t_4/output.gif"),width:"64",height:"64",alt:"Campanile Translation Rocket t_4 gif",loading:"lazy"})]}),(0,t.jsx)("figcaption",{children:"$t = 7$"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsxs)(d.V,{children:[(0,t.jsx)(h.default,{className:"dissolve",src:s().join(g,"/text_conditioned/t_5/denoise_7.png"),width:"64",height:"64",alt:"Campanile Translation Rocket t_5",loading:"lazy"}),(0,t.jsx)(h.default,{className:"emerge",src:s().join(g,"/text_conditioned/t_5/output.gif"),width:"64",height:"64",alt:"Campanile Translation Rocket t_5 gif",loading:"lazy"})]}),(0,t.jsx)("figcaption",{children:"$t = 10$"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsxs)(d.V,{children:[(0,t.jsx)(h.default,{className:"dissolve",src:s().join(g,"/text_conditioned/t_6/denoise_5.png"),width:"64",height:"64",alt:"Campanile Translation Rocket t_6",loading:"lazy"}),(0,t.jsx)(h.default,{className:"emerge",src:s().join(g,"/text_conditioned/t_6/output.gif"),width:"64",height:"64",alt:"Campanile Translation Rocket t_6 gif",loading:"lazy"})]}),(0,t.jsx)("figcaption",{children:"$t = 20$"})]})]}),(0,t.jsx)("p",{children:"We see that the images look more similar to the base image (Campanile) when we start off with less noise, but still resembles a rocket, which was the prompt embed used."})]})},{id:"Visual Anagrams",content:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Visual Anagrams"}),(0,t.jsx)("p",{children:"We can also flip the image at each step, denoise and flip it back to make a separate denoising step towards a different prompt embed. This allows us to make a flip illusion, where flipping the image reveals a hidden image. Hover over the images to visualize the result:"}),(0,t.jsxs)(d.V,{columns:4,children:[(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/flip_illusion/i1/denoise_9.png"),alt:"Flip Illusion Skull, Waterfall",width:"64",height:"64",className:"flip",loading:"lazy"}),(0,t.jsx)("figcaption",{className:"dissolve",children:"A Waterfall"}),(0,t.jsx)("figcaption",{className:"emerge",children:"A Skull"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/flip_illusion/i2/denoise_9.png"),alt:"Flip Illusion Man, Campfire",width:"64",height:"64",className:"flip",loading:"lazy"}),(0,t.jsx)("figcaption",{className:"dissolve",children:"A Campfire"}),(0,t.jsx)("figcaption",{className:"emerge",children:"A Man"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:"./media/flip_illusion/i3/denoise_9.png",alt:"Flip Illusion Man with Hat, Campfire",width:"64",height:"64",className:"flip",loading:"lazy"}),(0,t.jsx)("figcaption",{className:"dissolve",children:"A Campfire"}),(0,t.jsx)("figcaption",{className:"emerge",children:"A Man Wearing a Hat"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/flip_illusion/i4/denoise_9.png"),alt:"Flip Illusion Dog, Snow Mountain",width:"64",height:"64",className:"flip",loading:"lazy"}),(0,t.jsx)("figcaption",{className:"dissolve",children:"A Snowy Village"}),(0,t.jsx)("figcaption",{className:"emerge",children:"A Dog"})]})]})]})},{id:"Hybrid Images",content:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Hybrid Images"}),(0,t.jsx)("p",{children:"A hybrid image is one where one subject in an image dominates when viewed up close and a different one dominates when viewed afar. We can again modify the noise added, this time taking the low frequencies of the predicted noise from one prompt embedding and adding it to the high frequencies of a different prompt embedding. Hover over the images to see the result:"}),(0,t.jsxs)(d.V,{columns:3,children:[(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/hybrid/skull_waterfall/denoise_9.png"),width:"64",height:"64",alt:"Skull Waterfall hybrid",className:"zoom-out",loading:"lazy"}),(0,t.jsx)("figcaption",{className:"dissolve",children:"A Waterfall"}),(0,t.jsx)("figcaption",{className:"emerge",children:"A Skull"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/hybrid/skull_winter/denoise_9.png"),width:"64",height:"64",alt:"Skull Snow Mountain hybrid",className:"zoom-out",loading:"lazy"}),(0,t.jsx)("figcaption",{className:"dissolve",children:"A Snow Mountain"}),(0,t.jsx)("figcaption",{className:"emerge",children:"A Skull"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/hybrid/pencil_snow/denoise_9.png"),width:"64",height:"64",alt:"Pencil Snow Mountain hybrid",className:"zoom-out",loading:"lazy"}),(0,t.jsx)("figcaption",{className:"dissolve",children:"A Snowy Village"}),(0,t.jsx)("figcaption",{className:"emerge",children:"A Pencil"})]})]})]})},{id:"Unconditional Unet",content:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Unconditional Unet"}),(0,t.jsx)("p",{children:"The unet is a convolutional network designed to output images from an input of a images. In the downward part of the net, we run the images through convolution and max pooling layers to increase the perception of the network. Going back up, we want to recover our image, so we add concatenations with information from our previous layers."}),(0,t.jsx)(d.V,{children:(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/unconditional_unet/architecture.png"),width:"64",height:"64",alt:"unet architecture"}),(0,t.jsx)("figcaption",{children:"Unet Design"})]})}),(0,t.jsxs)("p",{children:["In a one step denoising process, we can use our unet to directly predict the clean image from a noisy input. To train the unconditional network, we fix the noise level to"," ",(0,t.jsx)(c.A,{inline:!0,children:"\\(\\sigma = 0.5\\)"}),"and noise an image by the given formula:"," ",(0,t.jsx)(c.A,{children:"\\begin{equation*} x = x_{0} + \\varepsilon \\end{equation*}"})," ","where"," ",(0,t.jsx)(c.A,{children:"\\begin{equation*} \\varepsilon \\sim \\mathcal{N}(0, \\sigma^{2}) \\end{equation*}"})," ","We feed ",(0,t.jsx)(c.A,{inline:!0,children:"\\(x\\)"})," into the network and estimate the loss between",(0,t.jsx)(c.A,{inline:!0,children:"\\(\\hat{x}\\)"})," and"," ",(0,t.jsx)(c.A,{inline:!0,children:"\\(x_{0}\\)"})]}),(0,t.jsx)(d.V,{children:(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/unconditional_unet/loss.png"),width:"64",height:"64",alt:"Unconditional Unet Loss",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"After 5 epochs"})]})}),(0,t.jsx)("p",{children:"Here are some results, where the clean image is on the left, the noisy image is on the middle, and the predicted image is on the right of each figure:"}),(0,t.jsxs)(d.V,{columns:2,children:[(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/unconditional_unet/epoch_1.png"),width:"64",height:"64",alt:"Epoch 1 Denoise",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"Epoch 1 Denoising"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/unconditional_unet/epoch_5.png"),width:"64",height:"64",alt:"Epoch 5 Denoise",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"Epoch 5 Denoising"})]})]}),(0,t.jsxs)("p",{children:["The unconditional unet does not do very well with higher noise levels, as there was no input on the amount of noise in our training. From left to right, the model was given images with noise levels of"," ",(0,t.jsx)(c.A,{inline:!0,children:"\\(0.0, 0.2, 0.4, 0.6, 0.8, \\)"})," ","and",(0,t.jsx)(c.A,{inline:!0,children:"\\(1.0\\)"})]}),(0,t.jsxs)(d.V,{children:[(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/unconditional_unet/sampling_1.png"),alt:"Various noise level denoisings",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"Epoch 1 Denoising"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/unconditional_unet/sampling_5.png"),alt:"Various noise level denoisings",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"Epoch 5 Denoising"})]})]})]})},{id:"Conditional Unet",content:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Conditional Unet"}),(0,t.jsxs)("p",{children:["In a conditional unet, more information is given to the model and perform the denoising iteratively for better results. We define a new one step noising process:"," ",(0,t.jsx)(c.A,{children:"\\begin{equation*} x_{t} = \\sqrt{1 - \\overline{\\alpha_{t}}}x_{0} + \\sqrt{\\overline{\\alpha_{t}}}\\varepsilon \\end{equation*}"})," ","where",(0,t.jsx)(c.A,{children:"\\begin{equation*} \\varepsilon \\sim \\mathcal{N}(0, I) \\end{equation*}"})," ","We want to predict the cleaner image given a noisy image and this is given by some function of"," ",(0,t.jsx)(c.A,{inline:!0,children:"\\(x_{t}, x_{0}\\)"}),":",(0,t.jsx)(c.A,{children:"\\begin{equation*} p(x_{t - 1} \\mid x_{t}) = \\mathcal{N}(\\mu_{t}(x_{t}, x_{0}), \\tilde{\\beta} I) \\end{equation*}"})," ","so",(0,t.jsx)(c.A,{children:"\\begin{equation*} x_{t - 1} = \\dfrac{\\sqrt{\\overline{\\alpha_{t - 1}}}\\beta_{t}}{1 - \\overline{\\alpha_{t}}}x_{0} + \\dfrac{\\sqrt{\\alpha_{t}}(1 - \\overline{\\alpha}_{t - 1})}{1 - \\overline{\\alpha}_{t}}x_{t} + \\tilde{\\beta}_{t}z, \\, \\tilde{\\beta}_{t} = \\dfrac{1 - \\overline{\\alpha}_{t - 1}}{1 - \\overline{\\alpha}_{t}}\\beta_{t} \\end{equation*}"})," ","We define our",(0,t.jsx)(c.A,{inline:!0,children:"\\(\\beta_{t}\\)"})," as linear in",(0,t.jsx)(c.A,{inline:!0,children:"\\([0, 999]\\), \\(\\overline{\\alpha}_{t} = 1 - \\beta_{t}\\)"})," ","and"," ",(0,t.jsx)(c.A,{inline:!0,children:"\\alpha_{t} = \\prod_{i = 0}^{t}\\overline{\\alpha}_{i}"}),". This gives us a way to recover a cleaner image"," ",(0,t.jsx)(c.A,{inline:!0,children:"\\(x_{t - 1}\\)"})," in terms of the predicted noise",(0,t.jsx)(c.A,{inline:!0,children:"\\(\\hat{\\varepsilon}\\)"}),"and ",(0,t.jsx)(c.A,{inline:!0,children:"\\(x_{t}\\)"}),"."]}),(0,t.jsxs)("p",{children:["We first update the architecture by embedding the time and label of the training data. This is done by running both these through a linear layer, gelu, then another linear layer. We do this two times and embed at the unflatten layer and up convolve layer:",(0,t.jsx)(c.A,{children:"\\begin{equation*} x = c \\cdot x + t \\end{equation*}"}),"The forward process in the conditional unet is mostly the same. We add noise given by our new one step noising process. A mask is also created with a certain probability to run unconditioned predictions to make the model more flexible. Instead of predicting the clean image, the model will predict the noise and we update it based on"," ",(0,t.jsx)(c.A,{children:"MSE\\((\\hat{\\varepsilon}, \\varepsilon)\\)"})]}),(0,t.jsx)(d.V,{children:(0,t.jsxs)(d.D,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/conditional_unet/loss.png"),alt:"Conditional Unet Loss",width:"64",height:"64",loading:"lazy"}),(0,t.jsx)("figcaption",{children:"After 20 Epochs"})]})}),(0,t.jsxs)("p",{children:["In the sampling/denoising process, we iteratively predict the cleaner image given the formula for"," ",(0,t.jsx)(c.A,{inline:!0,children:"\\(x_{t - 1}\\)"})," calculated above. Hover over the images to see the denoising in action:"]}),(0,t.jsxs)(d.V,{children:[(0,t.jsxs)(d.D,{children:[(0,t.jsxs)(d.V,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/conditional_unet/sampling1.jpeg"),width:"64",height:"64",alt:"Conditional Unet Sampling 1 jpeg",loading:"lazy",className:"dissolve"}),(0,t.jsx)(h.default,{src:"./media/conditional_unet/sampling1.gif",width:"64",height:"64",alt:"Conditional Unet Sampling 1",loading:"lazy",className:"emerge"})]}),(0,t.jsx)("figcaption",{children:"Epoch 1"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsxs)(d.V,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/conditional_unet/sampling5.jpeg"),width:"64",height:"64",alt:"Conditional Unet Sampling 5 jpeg",loading:"lazy",className:"dissolve"}),(0,t.jsx)(h.default,{src:"./media/conditional_unet/sampling5.gif",width:"64",height:"64",alt:"Conditional Unet Sampling 5",loading:"lazy",className:"emerge"})]}),(0,t.jsx)("figcaption",{children:"Epoch 5"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsxs)(d.V,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/conditional_unet/sampling10.jpeg"),width:"64",height:"64",alt:"Conditional Unet Sampling 10 jpeg",loading:"lazy",className:"dissolve"}),(0,t.jsx)(h.default,{src:"./media/conditional_unet/sampling10.gif",width:"64",height:"64",alt:"Conditional Unet Sampling 10",loading:"lazy",className:"emerge"})]}),(0,t.jsx)("figcaption",{children:"Epoch 10"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsxs)(d.V,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/conditional_unet/sampling15.jpeg"),width:"64",height:"64",alt:"Conditional Unet Sampling 15 jpeg",loading:"lazy",className:"dissolve"}),(0,t.jsx)(h.default,{src:"./media/conditional_unet/sampling15.gif",width:"64",height:"64",alt:"Conditional Unet Sampling 15",loading:"lazy",className:"emerge"})]}),(0,t.jsx)("figcaption",{children:"Epoch 15"})]}),(0,t.jsxs)(d.D,{children:[(0,t.jsxs)(d.V,{children:[(0,t.jsx)(h.default,{src:s().join(g,"/conditional_unet/sampling20.jpeg"),width:"64",height:"64",alt:"Conditional Unet Sampling 20 jpeg",loading:"lazy",className:"dissolve"}),(0,t.jsx)(h.default,{src:"./media/conditional_unet/sampling20.gif",width:"64",height:"64",alt:"Conditional Unet Sampling 20",loading:"lazy",className:"emerge"})]}),(0,t.jsx)("figcaption",{children:"Epoch 20"})]})]})]})}];function u(){return(0,t.jsxs)("div",{children:[(0,t.jsx)(l.l,{children:(0,t.jsx)("h1",{children:"Project 5: Fun With Diffusion Models!"})}),(0,t.jsx)(o.LN,{children:(0,t.jsxs)(o.J3,{children:[(0,t.jsx)(o.nA,{children:p.map(e=>(0,t.jsx)(o.wn,{children:(0,t.jsx)(o.n9,{id:e.id,link:e.link,children:e.content})},e.id))}),(0,t.jsx)(r.B,{ids:p.map(e=>e.id)})]})})]})}},8989:(e,i,n)=>{"use strict";n.d(i,{l:()=>a});var t=n(5155);let a=e=>{let{children:i}=e;return(0,t.jsx)("div",{className:"text-center text-black p-20 row-span-2 row-start-1 row-end-2 flex flex-col flex-nowrap justify-center items-center w-full",children:i})}},9727:(e,i,n)=>{"use strict";n.d(i,{J3:()=>c,LN:()=>g,n9:()=>r,nA:()=>d,wn:()=>h});var t=n(5155),a=n(8173),s=n.n(a),l=n(9795);let o=(e,i)=>(0,t.jsx)(s(),{href:e,className:"z-10 block absolute top-0 ".concat(i?"":"max-w-[95%]"," w-full h-full bg-black rounded-2xl text-white ").concat(i?"hover:scale-x-105 hover:translate-x-[2%]  hover:translate-y-[4%]":"hover:translate-x-[2%]"," transform ease-in-out duration-200"),children:(0,t.jsx)("div",{className:"flex flex-row w-full h-full items-center justify-end ",children:(0,t.jsx)("div",{className:"w-[8%]",children:"➧"})})}),r=e=>{let{id:i,link:n,orientation:a,className:s,children:r}=e;return(0,t.jsxs)("div",{className:"h-fit",children:[(0,t.jsx)("article",{className:(0,l.QP)("relative z-50 m-0 p-8 text-left ".concat(a?"max-h-[90%] w-full":"max-w-[85%] h-full"," ").concat(n?"":"max-w-[100%]"," h-fit rounded-2xl bg-white text-black ").concat(s)),id:i,children:r}),n?o(n,a):""]})},d=e=>{let{children:i}=e;return(0,t.jsx)("div",{className:"flex flex-col flex-grow max-w-[60rem]",children:i})},h=e=>{let{children:i,className:n}=e;return(0,t.jsx)("section",{className:(0,l.QP)("mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red ".concat(n)),children:i})},c=e=>{let{children:i}=e;return(0,t.jsx)("div",{className:"flex flex-row flex-nowrap justify-center relative",children:i})},g=e=>{let{children:i}=e;return(0,t.jsx)("div",{className:"mx-[5vw]",children:i})}},2723:(e,i,n)=>{"use strict";n.d(i,{D:()=>l,V:()=>o});var t=n(5155),a=n(2115),s=n(9795);let l=e=>{let{children:i}=e;return(0,t.jsx)("figure",{children:a.Children.map(i,e=>a.isValidElement(e)&&"string"!=typeof e.type?a.cloneElement(e,{className:(0,s.QP)(e.props.className,"w-full text-center")}):e)})},o=e=>{let{columns:i=1,className:n,children:l}=e;return(0,t.jsx)("div",{className:(0,s.QP)("grid ".concat(["grid-cols-0","grid-cols-1","grid-cols-2","grid-cols-3","grid-cols-4","grid-cols-5","grid-cols-6","grid-cols-7","grid-cols-8"][i]," gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 ").concat(n," ")),children:a.Children.map(l,e=>a.isValidElement(e)&&"string"!=typeof e.type?a.cloneElement(e,{className:(0,s.QP)(e.props.className,"w-full")}):e)})}},1109:(e,i,n)=>{"use strict";n.d(i,{B:()=>a});var t=n(5155);let a=e=>{let{ids:i,children:n}=e;return(0,t.jsx)("div",{className:"block flex-grow",children:(0,t.jsxs)("div",{className:"max-w-[80%] mx-auto h-full",children:[n,i?(0,t.jsx)("div",{className:"sticky top-[20%] p-4 pl-6 border-1 border-black border-solid rounded-[1rem] bg-black shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-auto  max-h-[60vh] overflow-y-auto ",children:(0,t.jsx)("nav",{children:i.map(e=>(0,t.jsx)("ul",{children:(0,t.jsx)("a",{className:"block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 ",href:"#".concat(e),children:e})},e))})}):(0,t.jsx)("div",{})]})})}}},e=>{var i=i=>e(e.s=i);e.O(0,[173,795,970,441,517,358],()=>i(9553)),_N_E=e.O()}]);